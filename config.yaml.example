#Clash Meta æ¨¡æ¿
#æ—¶é—´ï¼š2023.4.18
#åªéœ€è¦åœ¨145è¡Œå¼€å§‹å¡«å…¥æœºåœºè®¢é˜…é“¾æ¥å³å¯ï¼Œå¦‚æœæœ‰æ›´å¤šæœºåœºè‡ªè¡Œæ·»åŠ 
#å¦‚æœä¿®æ”¹äº†åå­—è®°å¾—æŠŠå…¶ä»–åœ°æ–¹çš„åå­—ä¹Ÿä¸€å¹¶ä¿®æ”¹
#Tips:è¯·è‡ªè¡Œä¿®æ”¹åœ°åŒºç­–ç•¥ç»„çš„æ­£åˆ™è¿‡æ»¤
#å‚è€ƒï¼š
#é¦™æ¸¯ï¼š(?i)æ¸¯|hk|hongkong|kong kong|ğŸ‡­ğŸ‡°
#å°æ¹¾ï¼š(?i)å°|tw|taiwan
#æ—¥æœ¬ï¼š(?i)æ—¥æœ¬|jp|japan|ğŸ‡¯ğŸ‡µ
#ç¾å›½ï¼š(?i)ç¾|us|unitedstates|united states|ğŸ‡ºğŸ‡¸
#æ–°åŠ å¡ï¼š (?i)^(?!.*(?:us)).*(æ–°|sg|singapore|ğŸ‡¸ğŸ‡¬

# ç«¯å£è®¾ç½®
mixed-port: 7890
tproxy-port: 7891

# Clash.Meta è®¾ç½®
unified-delay: false
geodata-mode: true
tcp-concurrent: false
find-process-mode: off
global-client-fingerprint: chrome
geox-url:
  mmdb: "https://ghproxy.wushidi.gay/https://github.com/kogekiplay/geoip/releases/download/latest/Country.mmdb"
  geoip: "https://ghproxy.wushidi.gay/https://github.com/kogekiplay/clash-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://ghproxy.wushidi.gay/https://github.com/kogekiplay/clash-rules-dat/releases/download/latest/geosite-lite.dat"

# Meta åŸŸåå—…æ¢
sniffer:
  enable: false
  sniff:
      TLS:
        ports: [443, 8443]

      HTTP:
        ports: [80, 8080-8880]
        override-destination: true
  skip-domain:
    - 'Mijia Cloud'
    - 'dlg.io.mi.com'
    - '+.apple.com'
  # - '*.baidu.com'
  force-domain:
  # - '+'
    - 'google.com'

# Host
hosts:
  'time.android.com': 203.107.6.88
  'time.facebook.com': 203.107.6.88

# Tun Mode
tun:
  enable: true
  stack: system
  dns-hijack:
    - '0.0.0.0:53'
  auto-route: true
  auto-detect-interface: true

# Clash è®¾ç½®
allow-lan: true
mode: rule
log-level: info
ipv6: true
udp: true
external-controller: 0.0.0.0:9090
external-ui: ../dashboard
secret: ""

# å­˜å‚¨é€‰æ‹©è®°å½•
profile:
  store-selected: true
  store-fake-ip: true

# dnsè®¾ç½®
dns:
  enable: true
  listen: 0.0.0.0:1053
  use-hosts: true
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter:
    - '*'
    - '+.lan'
  default-nameserver:
    - 223.5.5.5
  nameserver:
    - 'tls://8.8.4.4#ğŸ”¬ Dns Proxy'
    - 'tls://1.0.0.1#ğŸ”¬ Dns Proxy'
  proxy-server-nameserver:
    - tls://223.5.5.5
  nameserver-policy:
    "geosite:cn,lan":
    - tls://223.5.5.5
    - tls://1.12.12.12

proxies:
#é”šç‚¹
p: &p
  type: http
  interval: 43200
  health-check:
    enable: true
    url: http://cp.cloudflare.com/
    interval: 600

#æ”¹ä¸‹é¢ä»£ç†æä¾›å•†çš„åå­—çš„è¯ï¼Œè¿™é‡Œé¢çš„åå­—ä¹Ÿéœ€è¦ä¸€å¹¶ä¿®æ”¹
u: &u
  type: select
  use:
    - Nexitally
    - Other
    - è‡ªå»º
    - WARP
    - BESTVPN

nex: &nex
  type: url-test
  use:
    - Nexitally
    - BESTVPN
  url: "https://cp.cloudflare.com/"
  interval: 600

pr: &pr
  type: select
  proxies:
    - ğŸ³ï¸â€âš§ï¸ Proxy
    - ğŸ‡­ğŸ‡° Hong Kong
    - ğŸ‡¨ğŸ‡³ Taiwan
    - ğŸ‡¯ğŸ‡µ Japan
    - ğŸ‡¸ğŸ‡¬ Singapore
    - ğŸ‡ºğŸ‡¸ United States
    - ğŸ«§ Global Region
    - ğŸª„ Select
    - ğŸª¢ Direct
    - ğŸ§¬ Reject

proxy-providers:

  Nexitally:
      <<: *p
      url: ""
      path: ./proxy_providers/1.yaml

  Other:
      <<: *p
      url: ""
      path: ./proxy_providers/2.yaml

  è‡ªå»º:
      <<: *p
      url: ""
      path: ./proxy_providers/3.yaml

  WARP:
      <<: *p
      url: ""
      path: ./proxy_providers/4.yaml

  BESTVPN:
      <<: *p
      url: ""
      path: ./proxy_providers/5.yaml

proxy-groups:

  - name: ğŸ³ï¸â€âš§ï¸ Proxy
    type: select
    proxies:
      - âœ¨ Auto
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡ºğŸ‡¸ United States
      - ğŸ«§ Global Region
      - ğŸª„ Select
      - ğŸª¢ Direct

#ç¤¾äº¤
  - name:  ğŸ’­ Chat
    <<: *pr

#æµåª’ä½“
  - name: ğŸ™ï¸ Stream
    <<: *pr

#Dnsè¿‡ä»£ç†
  - name: ğŸ”¬ Dns Proxy
    <<: *pr

#åˆ†éš”ï¼Œä¸‹é¢æ˜¯åœ°åŒºåˆ†ç»„
  - name: âœ¨ Auto
    filter: "ğŸ‡­ğŸ‡°|ğŸ‡¨ğŸ‡³|ğŸ‡¯ğŸ‡µ"
    <<: *nex

  - name: ğŸ‡­ğŸ‡° Hong Kong
    filter: "ğŸ‡­ğŸ‡°|é¦™æ¸¯"
    <<: *nex

  - name: ğŸ‡¨ğŸ‡³ Taiwan
    filter: "ğŸ‡¨ğŸ‡³|å°æ¹¾"
    <<: *nex

  - name: ğŸ‡¯ğŸ‡µ Japan
    filter: "ğŸ‡¯ğŸ‡µ|æ—¥æœ¬"
    <<: *nex

  - name: ğŸ‡ºğŸ‡¸ United States
    filter: "ğŸ‡ºğŸ‡¸|ç¾å›½"
    <<: *nex

  - name: ğŸ‡¸ğŸ‡¬ Singapore
    filter: "ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡"
    <<: *nex

  - name: ğŸ«§ Global Region
    filter: "^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¨ğŸ‡³|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|é¦™æ¸¯|å°æ¹¾|æ—¥æœ¬|ç¾å›½|æ–°åŠ å¡)).*"
    <<: *u

  - name: ğŸª„ Select
    <<: *u

# åŠ ä¸Šemoji
  - name: ğŸª¢ Direct
    type: select
    proxies:
      - DIRECT

  - name: ğŸ§¬ Reject
    type: select
    proxies:
      - REJECT

rules:
  - GEOSITE,telegram,ğŸ’­ Chat
  - GEOSITE,discord,ğŸ’­ Chat
  - GEOSITE,youtube,ğŸ™ï¸ Stream
  - GEOSITE,netflix,ğŸ™ï¸ Stream
  - GEOSITE,bahamut,ğŸ™ï¸ Stream
  - GEOSITE,bing,ğŸ³ï¸â€âš§ï¸ Proxy
  - GEOSITE,kogeki-!cn,ğŸ³ï¸â€âš§ï¸ Proxy
  - GEOIP,youtube,ğŸ™ï¸ Stream
  - GEOIP,netflix,ğŸ™ï¸ Stream
  - GEOIP,telegram,ğŸ’­ Chat
  - GEOSITE,proxy,ğŸ³ï¸â€âš§ï¸ Proxy
  - GEOSITE,onedrive,DIRECT
  - GEOSITE,steamcn,DIRECT
  - GEOSITE,kogeki-cn,DIRECT
  - GEOSITE,lan,DIRECT
  - GEOIP,private,DIRECT,no-resolve
  - GEOSITE,cn,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,ğŸ³ï¸â€âš§ï¸ Proxy